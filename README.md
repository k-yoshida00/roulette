# ルーレットWebアプリケーション 仕様書

## 1. 概要
このアプリケーションは、HTML5のCanvas要素を使用してインタラクティブなルーレットゲームを提供するWebアプリです。ランダムに選ばれた質問やテーマを提示することで、コミュニケーションのきっかけを作ることを目的としています。

## 2. 目的
- ユーザーに楽しく使えるルーレット体験を提供すること。
- 会話のネタや意思決定をサポートするツールとして機能すること。
- 内定式のアイスブレイク・自己紹介向けに、明るくおしゃれでカジュアルなデザインとする。

## 3. 主要な機能（更新）
- ルーレットの表示: Canvas上に動的なルーレットを描画する。
  - セグメント内のテキストはセグメント中央からやや外側寄りに描画するよう調整。
  - 表示テキストは1行に制限し、幅を超える場合は途中で「...」を付けて省略して表示する（ルーレット内部のみ）。結果表示は全文を表示する。
- スピン機能: 「スピン」ボタンをクリックすると、ルーレットが現在の角度から滑らかに回転してランダムな結果で停止する。
  - アニメーションは現在の rotation を開始角度として補間する（ジャンプを防止）。
- 結果の表示: ルーレットが停止したセクターのテキストを画面下に全文表示する。矢印位置との整合性を取るため、角度補正（矢印基準 270° から回転角を引く）を行う。
- レスポンシブデザイン: 画面サイズに合わせてルーレットのサイズが自動調整される。

## 4. 技術スタック（更新点）
- HTML5, CSS3, JavaScript (ES6)
- Canvas API を使用した描画ロジックに以下の改善を適用:
  - drawText 関数を改良して1行表示と省略処理を実装。
  - テキスト描画位置を外側に寄せるパラメータ（textRadius）を導入。
  - spin アニメーションで startRotation を使って補間する実装に変更。
  - showResult で角度計算を修正し、矢印と結果が一致するようにした。

## 5. ファイル構成（更新）
- index.html: エントリーポイント（変更なし）。
- style.css: 明るくおしゃれでカジュアルなデザインに差し替え。背景をライトなグラデーションにし、カード風コンテナ、カラフルなスピンボタン、矢印のアクセントカラー等を適用。
- script.js: ルーレットのメインロジックを更新。
  - drawText: 1行表示・省略（...）ロジック、外側寄せの座標を利用。
  - drawRoulette: テキスト描画位置を外側に調整。
  - spin: 現在角度から滑らかに回転するアニメーション。
  - showResult: 角度補正で正しいセクターを選択。

## 6. 実行方法
1. index.html, style.css, script.js を同じディレクトリに配置する。
2. index.html を任意のブラウザで開く。

## 7. 今後の拡張案（参考）
- ユーザーが自由にルーレットの選択肢を追加・編集できる UI。
- 行数やフォントサイズ、テキストの内外側オフセットをユーザーが調整できる設定。
- テーマ（色セット）プリセットの切り替え機能。